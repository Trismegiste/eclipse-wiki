{% extends "base.html.twig" %}
{% block content %}
    {{ form(form) }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            [...document.querySelectorAll('#npc_stats_skill_list input[type=checkbox]')].forEach(function (item) {
                item.addEventListener('change', function (ev) {

                    const key = ev.target.id.match(/.+_(\d+)$/)[1]

                    if (ev.target.checked) {
                        const collectionHolder = document.querySelector('#npc_stats_skills')

                        const item = document.createElement('div');

                        item.innerHTML = collectionHolder
                                .dataset
                                .prototype
                                .replace(/__name__/g, key)
                                .replace(/__undefined__/g, ev.target.value)
                        collectionHolder.appendChild(item);
                    } else {
                        document.getElementById('npc_stats_skills_' + key + '_roll').parentNode.parentNode.parentNode.remove()
                    }
                });
            })
        })
    </script>
{% endblock %}