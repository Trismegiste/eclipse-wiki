{# Custom rendering for RandomIntegerType #}
{% block random_integer_widget %}
    {% set idButton = id ~ '_randomize' %}
    <div class="pure-g">
        <div class="pure-u-1-2">{{ form_widget(form, {attr: {class: 'pure-input-1'}}) }}</div>
        <div class="pure-u-1-2"><a class="pure-button pure-input-1" id="{{ idButton }}"><i class="icon-randomize"></i>Random</a></div>
        <script>
            document.getElementById('{{ idButton }}').addEventListener('click', function (e) {
                let widget = document.getElementById('{{ id }}')
                widget.value = Math.floor(100000 * Math.random())
                const event = new Event('change', {bubbles: true})
                widget.dispatchEvent(event)
            })
        </script>
    </div>
{% endblock %}

{# Custom rendering for RandomNameType #}
{% block random_name_widget %}
    <div class="pure-g">
        <div class="pure-u-1-2">
            {{ form_widget(form, {attr: {class: 'pure-input-1'}}) }}
        </div>
        <div class="pure-u-1-4">
            <select id="{{ id }}_category" class="pure-input-1">
                <option value="[]">-------------</option>
                {% for key, choice in category %}
                    <option value="{{ choice|json_encode()|escape('html_attr') }}">{{ key|trans }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="pure-u-1-4">   
            <a class="pure-button pure-input-1" id="{{id}}_button"><i class="icon-randomize"></i>Random</a>
            <script>
                document.getElementById('{{id}}_button').addEventListener('click', function (e) {
                    let field = document.getElementById('{{ id }}')
                    let choice = JSON.parse(document.getElementById('{{ id }}_category').value)
                    if (choice.length > 0) {
                        field.value = choice[Math.floor(Math.random() * choice.length)]
                    }
                })
            </script>
        </div>
    </div>
{% endblock %}

{% block human_name_row %}
    {{ form_widget(form,{attr: {hidden:true}}) }}
    <div class="pure-g human-name">
        {% for label, gender in form.vars.choices %}
            {% for name in gender %}
                <div class="pure-u-1-6 form-widget">
                    <label>
                        <input type="radio" name="choice_{{ form.vars.id }}" value="{{ name }}" required="required"/>
                        {{ name }}
                    </label>
                </div>
            {% endfor %}
        {% endfor %}
    </div>   

    <script>
        window.addEventListener('load', () => {
            for (const sample of document.querySelectorAll('.human-name input')) {
                sample.addEventListener("click", function (e) {
                    const widget = document.getElementById('{{ form.vars.id }}')
                    widget.value = e.target.value
                })
            }
        })
    </script>        
{% endblock %}