/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/caret-pos@2.0.0/lib/esm2015/main.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var t=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],e=function(e,n){var o=document.createElement("div");return function(n){var r,i=(r={position:"absolute",left:-9999,top:0,zIndex:-2e3},"TEXTAREA"===e.tagName&&t.push("width"),t.forEach((function(t){r[t]=getComputedStyle(e)[t]})),r);Object.keys(i).forEach((function(t){o.style[t]=i[t]})),o.innerHTML=n,e.parentNode.insertBefore(o,e.nextSibling)}(n),{rect:function(){var t=o.ownerDocument.getElementById("caret-position-marker"),e={left:t.offsetLeft,top:t.offsetTop,height:t.offsetHeight};return o.parentNode.removeChild(o),e}}};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.customPos,n=t.iframe,o=t.noShadowCaret;return n?{iframe:n,window:n.contentWindow,document:n.contentDocument||n.contentWindow.document,noShadowCaret:o,customPos:e}:{window:window,document:document,noShadowCaret:o,customPos:e}},r=function(t,e){var n=e&&e.window||window,o=e&&e.document||document,r=t.getBoundingClientRect(),i=o.documentElement,a=n.pageXOffset||i.scrollLeft,l=n.pageYOffset||i.scrollTop;return{top:r.top+l,left:r.left+a}},i=function(t){return"object"===n(t)&&null!==t},a=function(t,n){return function(t){return!!(t.contentEditable?"true"===t.contentEditable:"true"===t.getAttribute("contenteditable"))}(t)?function(t,e){var n=function(){var n=o(),r={height:0,left:0,right:0};if(!n)return r;var i=e.customPos||0===e.customPos;if(n.endOffset-1>0&&n.endContainer!==t||i){var a=n.cloneRange(),l=i?e.customPos:n.endOffset;a.setStart(n.endContainer,l-1<0?0:l-1),a.setEnd(n.endContainer,l);var c=a.getBoundingClientRect();r={height:c.height,left:c.left+c.width,top:c.top},a.detach()}if((!r||r&&0===r.height)&&!e.noShadowCaret){var d=n.cloneRange(),f=e.document.createTextNode("|");d.insertNode(f),d.selectNode(f);var u=d.getBoundingClientRect();r={height:u.height,left:u.left,top:u.top},f.parentNode.removeChild(f),d.detach()}if(r){var s=e.document.documentElement;r.top+=e.window.pageYOffset-(s.clientTop||0),r.left+=e.window.pageXOffset-(s.clientLeft||0)}return r},o=function(){if(e.window.getSelection){var t=e.window.getSelection();return t.rangeCount>0?t.getRangeAt(0):null}},r=function(){var e=o(),n=e.cloneRange();n.selectNodeContents(t),n.setEnd(e.endContainer,e.endOffset);var r=n.toString().length;return n.detach(),r};return{getPos:r,setPos:function(n){var o=e.window.getSelection();if(o){var r=0,i=!1;!function t(a,l){for(var c=0;c<l.childNodes.length;c++){var d=l.childNodes[c];if(i)break;if(3===d.nodeType){if(r+d.length>=a){i=!0;var f=e.document.createRange();f.setStart(d,a-r),o.removeAllRanges(),o.addRange(f);break}r+=d.length}else t(n,d)}}(n,t)}return t},getPosition:function(){var o=n(),i=r(),a=t.getBoundingClientRect(),l=a.top+e.document.body.scrollTop,c=a.left+e.document.body.scrollLeft;return o.left-=c,o.top-=l,o.pos=i,o},getOffset:n,getRange:o}}(t,n):function(t,n){var o=function(){return t.selectionStart},i=function(r){var i=function(t){return t.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>")};(n.customPos||0===n.customPos)&&(r=n.customPos);var a=void 0===r?o():r,l=t.value.slice(0,a),c=t.value.slice(a),d='<span style="position: relative; display: inline;">'.concat(i(l),"</span>");d+='<span id="caret-position-marker" style="position: relative; display: inline;">|</span>',d+='<span style="position: relative; display: inline;">'.concat(i(c),"</span>");var f=e(t,d).rect();return f.pos=o(),f};return{getPos:o,setPos:function(e){return t.setSelectionRange(e,e),t},getOffset:function(e){var o=r(t),a=i(e);return{top:o.top+a.top+n.document.body.scrollTop,left:o.left+a.left+n.document.body.scrollLeft,height:a.height}},getPosition:i}}(t,n)},l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(e)&&(n=e,e=null);var r=o(n),l=a(t,r);return e||0===e?l.setPos(e):l.getPosition()},c=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(e)&&(n=e,e=null);var r=o(n);return a(t,r).getOffset(e)};export{r as getOffset,c as offset,l as position};export default null;
